<!DOCTYPE html>
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head><title>Simulation</title> 
<!--[if lte IE 8]>
<script language="javascript" type="text/javascript" src="flot/excanvas.min.js"></script>
<![endif]-->
<script language="javascript" type="text/javascript" src="../jquery-1.6.4.min.js"></script>
<script language="javascript" type="text/javascript" src="../asm_js.js"></script>
<style type="text/css">    html, body {  height: 95%; width:95%;font-family: sans-serif;  font-size: 16px;} #button {     position: absolute;        cursor: pointer;    }    div.button {        font-size: smaller;        color: #999;        background-color: #eee;        padding: 2px;    }</style>

<script language="javascript" type="text/javascript">

var _simContex;
var width, height;
var _setPixelIm, _setPixelData; 

function init(win)
{
	vars = win.vars;
	vars_type=win.vars_type;
	const_vars=win.const_vars;
	const_vars_type=win.const_vars_type;


	var c=document.getElementById("canvas_id");
	
	_simContex=c.getContext("2d");
	
	_setPixelIm = _simContex.createImageData(1,1); 
	_setPixelData  = _setPixelIm.data; 
	
	width = win.canvasWidth;
	height = win.canvasHeight;
	
	c.width  = width;
	c.height = height;

	//asm_func_init();	
	
	//asm_func_draw();
	//win.canvasCode;
	
	setInterval(function(){ eval( " _canvasUpdate(); function _canvasUpdate(){ asm_func_draw(); return; \n" + win.canvasCode  + "\n}")/*asm_func_draw()*/},1);
}

var vars=[];
var vars_type=[];
var const_vars=[];
var const_vars_type=[];


</script>

</head>
<body onload="if (this.opener) { init(this.opener) };">  
<canvas id="canvas_id" style="border:1px solid gray;"></canvas>
</body></html>